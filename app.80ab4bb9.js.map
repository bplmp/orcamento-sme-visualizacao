{"version":3,"sources":["webpack:///./src/slides_configs.js","webpack:///./src/slides.js","webpack:///./src/data/text.json","webpack:///./src/scroll.js","webpack:///./src/data/budget.json","webpack:///./src/index.js"],"names":["configs","duration","durationFast","this","durationSlow","__webpack_require__","d","__webpack_exports__","slides","d3","slidesConfigs","textData","defaultAnimation","slide","categories","opacity","select","selectAll","transition","style","cat_1","cat_2","forEach","category","s01","undefined","animation","s02","s03","s03_01","s03_02","s03_03","s04","s04_01","s04_02","s04_03","s04_04","s05","s05_01","s05_02","s05_03","s05_04","s06","s06_01","s06_02","s06_03","s06_04","s06_05","s07","s07_01","s07_02","Object","keys","key","index","slideText","paragraphs","text","module","exports","window","onscroll","id","element","bounds","slideIds","i","length","slideId","document","getElementById","getBoundingClientRect","top","innerHeight","bottom","setActiveSlide","activeSlideId","name","children","size","__WEBPACK_IMPORTED_MODULE_0__style_main_css__","n","numeral","register","delimiters","thousands","decimal","abbreviations","thousand","million","billion","trillion","currency","symbol","locale","defaultFormat","data","textDiv","querySelector","init","chartDiv","innerHTML","svg","append","width","clientWidth","height","clientHeight","color","scaleOrdinal","schemeCategory20","map","interpolateRgb","treemap","format","tile","treemapResquarify","round","paddingInner","root","hierarchy","eachBefore","parent","sum","sumBySize","sort","a","b","value","cell","leaves","enter","attr","x0","y0","x1","y1","on","timeout","stop","textParagraphs","slideCategories","slideValues","cat","slideRect","push","parseFloat","dataset","totalValue","reduce","html","join","onload","addEventListener"],"mappings":"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","file":"app.80ab4bb9.js","sourcesContent":["export const configs = {\n  duration: 500,\n  durationFast: function () {\n    return this.duration / 2;\n  },\n  durationSlow: function () {\n    return this.duration * 2;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/slides_configs.js","const d3 = require('d3v4');\nconst slidesConfigs = require('./slides_configs').configs;\nconst textData = require('./data/text.json');\n\nfunction fadeIn(selector) {\n  d3.selectAll(selector)\n  .transition()\n  .duration(slidesConfigs.duration)\n  .style('opacity', 0.7)\n}\n\nfunction fadeAllOut() {\n  d3.select('#chart').selectAll('g')\n  .transition()\n  .duration(slidesConfigs.duration)\n  .style('opacity', 0.2)\n}\n\nfunction fadeGroup(categories, opacity) {\n  categories.forEach(function (category) {\n    d3.selectAll('#g-' + category)\n    .transition()\n    .duration(slidesConfigs.duration)\n    .style('opacity', opacity)\n  })\n}\n\nfunction defaultAnimation(slide) {\n  fadeAllOut()\n  if (slide.cat_1) {\n    d3.selectAll('.' + slide.cat_1)\n    .transition()\n    .duration(slidesConfigs.duration)\n    .style('opacity', 0.7)\n  }\n  if (slide.cat_2) {\n    fadeGroup(slide.cat_2, 1)\n  }\n}\n\nexport let slides = {\n  \"s01\": {\n    \"cat_1\": undefined,\n    \"cat_2\": undefined,\n    \"animation\": function () {\n      d3.selectAll('g')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', 0)\n    },\n  },\n  \"s02\": {\n    \"cat_1\": undefined,\n    \"cat_2\": undefined,\n  },\n  \"s03\": {\n    \"cat_1\": \"orc-pessoal\",\n    \"cat_2\": undefined,\n  },\n  \"s03_01\": {\n    \"cat_1\": \"orc-pessoal\",\n    \"cat_2\": [\"orc-pessoal-docentes\"],\n  },\n  \"s03_02\": {\n    \"cat_1\": \"orc-pessoal\",\n    \"cat_2\": [\"orc-pessoal-gestores\"],\n  },\n  \"s03_03\": {\n    \"cat_1\": \"orc-pessoal\",\n    \"cat_2\": [\"orc-pessoal-estagios\", \"orc-pessoal-outros\"],\n  },\n  \"s04\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": undefined,\n  },\n  \"s04_01\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\"orc-funcionamento_unidades-limpeza\"],\n  },\n  \"s04_02\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\"orc-funcionamento_unidades-vigilancia\"],\n  },\n  \"s04_03\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\n      \"orc-funcionamento_unidades-agua_esgoto\",\n      \"orc-funcionamento_unidades-eletricidade\",\n      \"orc-funcionamento_unidades-telefone\",\n    ],\n  },\n  \"s04_04\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\n      \"orc-funcionamento_unidades-manutencao\",\n      \"orc-funcionamento_unidades-aluguel_imoveis\",\n    ],\n  },\n  \"s05\": {\n    \"cat_1\": undefined,\n    \"cat_2\": undefined,\n  },\n  \"s05_01\": {\n    \"cat_1\": \"orc-parcerias\",\n    \"cat_2\": undefined,\n  },\n  \"s05_02\": {\n    \"cat_1\": \"orc-parcerias\",\n    \"cat_2\": [\"orc-parcerias-creches\"],\n  },\n  \"s05_03\": {\n    \"cat_1\": \"orc-parcerias\",\n    \"cat_2\": [\"orc-parcerias-ed_especial\"],\n  },\n  \"s05_04\": {\n    \"cat_1\": \"orc-parcerias\",\n    \"cat_2\": [\n      \"orc-parcerias-eja\",\n      \"orc-parcerias-outros\"\n    ],\n  },\n  \"s06\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": undefined,\n  },\n  \"s06_01\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-refeicoes\"],\n  },\n  \"s06_02\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-insumos\"],\n  },\n  \"s06_03\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-prep_dist\"],\n  },\n  \"s06_04\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-leve_leite\"],\n  },\n  \"s06_05\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-pnae\"],\n  },\n  \"s07\": {\n    \"cat_1\": \"orc-uniforme_materiais\",\n    \"cat_2\": undefined,\n  },\n  \"s07_01\": {\n    \"cat_1\": \"orc-uniforme_materiais\",\n    \"cat_2\": [\"orc-uniforme_materiais-uniforme\"],\n  },\n  \"s07_02\": {\n    \"cat_1\": \"orc-uniforme_materiais\",\n    \"cat_2\": [\"orc-uniforme_materiais-materiais\"],\n  },\n}\n\nObject.keys(slides).forEach(function(key, index) {\n  let slide = slides[key]\n  // set default animation for those without\n  slide.animation ? true : slide.animation = function () { defaultAnimation(slide); }\n  // set text from json file\n  let slideText = textData.paragraphs[key]\n  slideText ? slide.text = slideText.text : slide.text = '&nbsp;'\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/slides.js","module.exports = {\"paragraphs\":{\"s01\":{\"text\":\"Imagine que sua tela representa todo o orçamento da Secretaria de Educação.\"},\"s02\":{\"text\":\"Agora, vamos começar a dividir a tela em partes, para mostrar como a Secretaria gasta seu orçamento.\"},\"s03\":{\"text\":\"Esta é a parte que corresponde ao gasto com pessoal, mais da metade de todo orçamento.\"},\"s03_01\":{\"text\":\"A maior parte dos gastos com pessoal são salários e benefícios dos professores.\"},\"s03_02\":{\"text\":\"O restante dos gastos são com gestores,\"},\"s03_03\":{\"text\":\"estagiários e outros pequenos custos.\"},\"s04\":{\"text\":\"Esta outra parte são os gastos com o funcionamento das escolas e de outros prédios da Secretaria.\"},\"s04_01\":{\"text\":\"O maior custo é com limpeza,\"},\"s04_02\":{\"text\":\"seguido por vigilância,\"},\"s04_03\":{\"text\":\"água e esgoto, luz, e telefone,\"},\"s04_04\":{\"text\":\"manutenção e aluguel de imóveis.\"},\"s05\":{\"text\":\"Além de construir e manter seus próprios prédios, a Secretaria também faz parcerias com outras entidades para prover educação.\"},\"s05_01\":{\"text\":\"Esta é a parte corresponde ao valor dessas parcerias.\"},\"s05_02\":{\"text\":\"Sua maior parte é repassada para Centros de Educação Infantil, também conhecidos como creches.\"},\"s05_03\":{\"text\":\"Outra parte é utilizada para a educação de pessoas com necessidades especiais.\"},\"s05_04\":{\"text\":\"E o restante com programas de Educação de Jovens e Adultos e outras parcerias.\"},\"s06\":{\"text\":\"Um outro grande custo da Secretaria é com a alimentação dos estudantes.\"},\"s06_01\":{\"text\":\"Boa parte é gasto com refeições compradas diretamente de fornecedores.\"},\"s06_02\":{\"text\":\"Mas a Secretaria também compra alimentos para produzir refeições,\"},\"s06_03\":{\"text\":\"e nesse caso precisa pagar também pelo seu preparo e distribuição.\"},\"s06_04\":{\"text\":\"O restante é gasto com o programa Leve-Leite, que entrega leite de graça para famílias de baixa renda com crianças pequenas,\"},\"s06_05\":{\"text\":\"e com repasse de verbas do Programa Nacional de Alimentação Escolar (PNAE) diretamente para as escolas.\"},\"s07\":{\"text\":\"A Secretaria também tem custos com materiais para os estudentes,\"},\"s07_01\":{\"text\":\"como uniformes escolares\"},\"s07_02\":{\"text\":\"e outros materias didáticos.\"}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/data/text.json\n// module id = 7fyq\n// module chunks = 1","const d3 = require('d3v4');\nconst slides = require('./slides').slides;\nconst slidesConfigs = require('./slides_configs').configs;\n\n// On every scroll event, check which element is on screen\nwindow.onscroll = function() {\n    var slideIds = Object.keys(slides);\n    for (var i = 0; i < slideIds.length; i++) {\n        var slideId = slideIds[i];\n        if (isElementOnScreen(slideId)) {\n            setActiveSlide(slideId);\n            break;\n        }\n    }\n};\n\nlet activeSlideId = 's01';\nfunction setActiveSlide(slideId) {\n    if (slideId === activeSlideId) return;\n\n    let slide = slides[slideId]\n    // console.log(slide);\n    slide.animation ? slide.animation() : false\n\n    activeSlideId = slideId;\n}\n\nfunction isElementOnScreen(id) {\n    var element = document.getElementById(id);\n    var bounds = element.getBoundingClientRect();\n    return bounds.top < (window.innerHeight / 1) && bounds.bottom > 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/scroll.js","module.exports = {\"name\":\"orc\",\"children\":[{\"name\":\"alimentacao\",\"children\":[{\"name\":\"insumos\",\"size\":194498042.16},{\"name\":\"leve_leite\",\"size\":50826933.02},{\"name\":\"outros\",\"size\":7850},{\"name\":\"pnae\",\"size\":19871110},{\"name\":\"prep_dist\",\"size\":52905599.38},{\"name\":\"refeicoes\",\"size\":328161844.67}]},{\"name\":\"funcionamento_unidades\",\"children\":[{\"name\":\"agua_esgoto\",\"size\":93020801.3},{\"name\":\"aluguel_imoveis\",\"size\":17577437.31},{\"name\":\"eletricidade\",\"size\":44973126.74},{\"name\":\"limpeza\",\"size\":406884941.54},{\"name\":\"manutencao\",\"size\":17065857.04},{\"name\":\"mobiliario\",\"size\":11702},{\"name\":\"telefone\",\"size\":5298664.84},{\"name\":\"vigilancia\",\"size\":181857045.36}]},{\"name\":\"obras_reformas\",\"children\":[{\"name\":\"obras_reformas\",\"size\":58263296.13}]},{\"name\":\"parcerias\",\"children\":[{\"name\":\"creches\",\"size\":1954064406.19},{\"name\":\"ed_especial\",\"size\":36483656.53},{\"name\":\"eja\",\"size\":10687166.22},{\"name\":\"outros\",\"size\":3005697.93}]},{\"name\":\"pessoal\",\"children\":[{\"name\":\"docentes\",\"size\":5872021815.26},{\"name\":\"estagios\",\"size\":33448144.67},{\"name\":\"gestores\",\"size\":343097216.08},{\"name\":\"outros\",\"size\":2179419.19}]},{\"name\":\"ti\",\"children\":[{\"name\":\"internet\",\"size\":11271799.47},{\"name\":\"manutencao_equip_ti\",\"size\":5937810.78},{\"name\":\"outros\",\"size\":13863315.66},{\"name\":\"prodam\",\"size\":9824413.64}]},{\"name\":\"transferencias\",\"children\":[{\"name\":\"ptrf\",\"size\":41846569.91}]},{\"name\":\"uniforme_materiais\",\"children\":[{\"name\":\"materiais\",\"size\":26113731.88},{\"name\":\"uniforme\",\"size\":101825344.25}]}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/data/budget.json\n// module id = RdSv\n// module chunks = 1","const d3 = require('d3v4');\nconst numeral = require('numeral');\nnumeral.register('locale', 'br', {\n    delimiters: {\n        thousands: '.',\n        decimal: ','\n    },\n    abbreviations: {\n        thousand: 'mil',\n        million: 'mi',\n        billion: 'bi',\n        trillion: 'tri'\n    },\n    currency: {\n        symbol: 'R$'\n    }\n});\nnumeral.locale('br');\nnumeral.defaultFormat('0,0.00');\n\nimport './style/main.css'\nconst slides = require('./slides').slides;\nconst data = require('./data/budget.json');\n\nconst scroll = require('./scroll');\n\nlet svgDiv = document.querySelector('#svg')\nlet textDiv = document.querySelector('#text')\n\nsvg.innerHTML = `<svg id=\"chart\" class=\"treemap\" width=\"100%\" height=\"100%\"></svg>`\n\nwindow.onload = function() {\n  init();\n};\n\nfunction init() {\n  var chartDiv = document.getElementById(\"chart\");\n  chartDiv.innerHTML = '';\n  var svg = d3.select(chartDiv).append(\"svg\");\n  var width = chartDiv.clientWidth;\n  var height = chartDiv.clientHeight;\n\n  var fader = function(color) { return d3.interpolateRgb(color, \"#fff\")(0.2); },\n  color = d3.scaleOrdinal(d3.schemeCategory20.map(fader)),\n  format = d3.format(\",d\");\n\n  var treemap = d3.treemap()\n  .tile(d3.treemapResquarify)\n  .size([width, height])\n  .round(true)\n  // FIXME: padding here\n  .paddingInner(1);\n\n  var root = d3.hierarchy(data)\n  .eachBefore(function(d) { d.data.id = (d.parent ? d.parent.data.id + \"-\" : \"\") + d.data.name; })\n  .eachBefore(function(d) { d.data.parent = (d.parent ? d.parent.data.id : \"\"); })\n  .sum(sumBySize)\n  .sort(function(a, b) { return b.height - a.height || b.value - a.value; });\n\n  treemap(root);\n\n  var cell = svg.selectAll(\"g\")\n  .data(root.leaves())\n  .enter().append(\"g\")\n  .attr(\"id\", function(d) { return \"g-\" + d.data.id; })\n  .attr(\"class\", function(d) { return d.data.parent; })\n  .style(\"opacity\", 0)\n  .attr(\"transform\", function(d) { return \"translate(\" + d.x0 + \",\" + d.y0 + \")\"; });\n\n  cell.append(\"rect\")\n  .attr(\"id\", function(d) { return d.data.id; })\n  .attr(\"data-value\", function(d) { return d.value; })\n  .attr(\"width\", function(d) { return d.x1 - d.x0; })\n  .attr(\"height\", function(d) { return d.y1 - d.y0; })\n  .attr(\"stroke\", \"#fff\")\n  .attr(\"stroke-width\", 0)\n  .attr(\"fill\", function(d) { return color(d.parent.data.id); });\n\n  cell.append(\"clipPath\")\n  .attr(\"id\", function(d) { return \"clip-\" + d.data.id; })\n  .append(\"use\")\n  .attr(\"xlink:href\", function(d) { return \"#\" + d.data.id; });\n\n  // cell.append(\"text\")\n  // .attr(\"clip-path\", function(d) { return \"url(#clip-\" + d.data.id + \")\"; })\n  // .selectAll(\"tspan\")\n  // // .data(function(d) { return d.data.name.split(/(?=[A-Z][^A-Z])/g); })\n  // .data(function(d) { return String((d.value / 1000000).toFixed(2)).split(/(?=[A-Z][^A-Z])/g); })\n  // .enter().append(\"tspan\")\n  // .attr(\"x\", 4)\n  // .attr(\"y\", function(d, i) { return 13 + i * 10; })\n  // .text(function(d) { return d; });\n  //\n  // cell.append(\"title\")\n  // .text(function(d) { return d.data.id + \"\\n\" + format(d.value); });\n\n  d3.selectAll(\"input\")\n  .data([sumBySize, sumByCount], function(d) { return d ? d.name : this.value; })\n  .on(\"change\", changed);\n\n  // var timeout = d3.timeout(function() {\n  //   d3.select(\"input[value=\\\"sumByCount\\\"]\")\n  //       .property(\"checked\", true)\n  //       .dispatch(\"change\");\n  // }, 2000);\n\n  function changed(sum) {\n    timeout.stop();\n\n    treemap(root.sum(sum));\n\n    cell.transition()\n    .duration(750)\n    .attr(\"transform\", function(d) { return \"translate(\" + d.x0 + \",\" + d.y0 + \")\"; })\n    .select(\"rect\")\n    .attr(\"width\", function(d) { return d.x1 - d.x0; })\n    .attr(\"height\", function(d) { return d.y1 - d.y0; });\n  }\n\n  function sumByCount(d) {\n    return d.children ? 0 : 1;\n  }\n\n  function sumBySize(d) {\n    return d.size;\n  }\n\n  let textParagraphs = [];\n  Object.keys(slides).forEach(function(key, index) {\n    let slide = slides[key]\n    let text = slide.text\n    let id = key\n    let slideCategories = slide.cat_2\n    let slideValues = []\n    if (slideCategories) {\n      slideCategories.forEach(function (cat) {\n        let slideRect = document.getElementById(cat)\n        let slideValue = slideRect ? slideValues.push(parseFloat(slideRect.dataset.value)) : false\n      })\n    }\n    let totalValue = slideValues.reduce((a, b) => a + b, 0)\n    totalValue = numeral(totalValue / 1000000).format()\n    let valueHtml = slideValues.length ? `<p>${totalValue} milhões</p>` : ''\n    // alternative: display all values\n    // if (slideCategories) {\n    //   slideCategories.forEach(function (cat) {\n    //     let slideRect = document.getElementById(cat)\n    //     let slideValue = slideRect ? numeral(parseFloat(slideRect.dataset.value) / 100000).format() : false\n    //     slideValues.push(slideValue)\n    //   })\n    // }\n    // let valueHtml = slideValues.length ? `<p>${slideValues.join(',&nbsp;&nbsp;')} milhões</p>` : ''\n    let html = `<div class=\"text-paragraph\" id=\"${id}\"><h1>${text}</h1>${valueHtml}</div>`\n    textParagraphs.push(html)\n  });\n\n  textDiv.innerHTML = `${textParagraphs.join('')}`\n}\n\nwindow.addEventListener(\"resize\", init);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}